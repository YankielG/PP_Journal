{% extends 'fragments/layout.html' %}
{% load static %}

{% block page_title %} Profil - Historia {% endblock %}

{% block page_content %}

    <div class="container">
        <div class="uk-panel">
            <img class="uk-align-left uk-margin-remove-adjacent" src="{% static 'background.JPG' %}" width="60"
                 height="28" alt="info">
            <h2 class="uk-heading-divider" style="position: relative">Profil - Historia</h2>
        </div>

        <div style="height: 50px"></div>
        <div class="uk-card uk-card-default uk-border-rounded">
            <div class="uk-card-header">
                <div class="uk-width-expand">
                    <h3 class="uk-card-title uk-position-relative uk-position-top-center">Historia konta</h3>
                </div>
            </div>

            <div class="uk-card-body" style="width:1100px; margin: auto">
                <div>
                    <a href uk-icon="icon: search" uk-tooltip="Wyszukaj" style="margin-left: 5px"></a>
                    <div class="uk-drop" uk-drop="mode: click; pos: right-center; offset: 5">
                        <form class="uk-search uk-width-1-1">
                            <input name="search" class="uk-search-input" type="search"
                                   placeholder="Wyszukaj po IP, 3-10 znaków." minlength="3" maxlength="10"
                                   aria-label="Search"
                                   autofocus>
                        </form>
                    </div>
                    {% if filter_value %}
                        <span style="color: #4169E1; margin-left: 50px">Zastosowany Filtr:</span>
                        <span style="color: #FF7F50"> {{ filter_value }} </span>
                    {% endif %}

                    <span class="uk-position-relative uk-align-right"> Ilość wpisów: {{ pages_max_elements }} </span>
                </div>

                <table class="uk-table uk-table-striped uk-table-hover uk-table-small">
                    <thead>
                    <tr>
                        <th style="width:5%; text-align: center" class="uk-text-middle">Lp.</th>
                        <th style="width:30%; text-align: center" class="uk-text-middle">Data</th>
                        <th style="width:20%; text-align: center" class="uk-text-middle">Klijent</th>
                        <th style="width:30%; text-align: center" class="uk-text-middle">IP</th>
                        <th style="width:5%; text-align: center" class="uk-text-middle">Błędy logowania</th>
                        <th style="width:5%; text-align: center" class="uk-text-middle">Liczba nowych wpisów</th>
                        <th style="width:5%; text-align: center" class="uk-text-middle">Liczba modyfikacji</th>
                        <th style="width:5%; text-align: center" class="uk-text-middle">Liczba pojedynczych skasowań</th>
                        <th style="width:5%; text-align: center" class="uk-text-middle">Liczba wszystkich skasowań</th>
                    </tr>
                    </thead>

                    <tbody>
                    {% for value in history %}
                        <tr style="text-align: center">
                            <td>
                                <input name="number" value="{{ history.start_index|add:forloop.counter0 }}"
                                       type="hidden">
                                {{ history.start_index|add:forloop.counter0 }}
                            </td>
                            <td>{{ value.login_date |date:'D, d M Y,' }} {{ value.login_date |time:"H:i" }}</td>
                            <td>{{ value.user_agent }}</td>
                            <td>{{ value.ip_address }}</td>
                            <td>{{ value.failed_login_attempts }}</td>
                            <td>{{ value.cnt_entries }}</td>
                            <td>{{ value.cnt_modification }}</td>
                            <td>{{ value.cnt_deleted }}</td>
                            <td>{{ value.cnt_all_deleted }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>

                </table>
            </div>

            <div class="uk-position-center uk-position-relative">
              <span>
                 {% if history.has_previous %}
                     <a href="?page=1" style="color: #00BFFF; margin-right: 20px">&laquo; Pierwsza</a>
                     <a href="?page={{ history.previous_page_number }}" style="color: #32CD32">Poprzednia </a>
                 {% endif %}
                  <span>Strona {{ history.number }} z {{ history.paginator.num_pages }}</span>
                  {% if history.has_next %}
                      <a href="?page={{ history.next_page_number }}" style="color: #32CD32"> Następna</a>
                      <a href="?page={{ history.paginator.num_pages }}" style="color: #00BFFF; margin-left: 20px"> Ostatnia  &raquo;</a>
                  {% endif %}
              </span>
            </div>

        </div>
    </div>
{% endblock %}