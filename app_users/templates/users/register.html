{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    {#    <title>Dzienniczek Zdrowia - {% block page_title %}{% endblock %}</title>#}
    <title>Dzienniczek Zdrowia</title>

    <link rel="icon" type="image/x-icon" href="{% static 'icon.ico' %}">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="{% static 'css/uikit.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/private.css' %}">

    <script src="{% static 'js/uikit.min.js' %}"></script>
    <script src="{% static 'js/uikit-icons.min.js' %}"></script>
</head>

<body>

<div class="uk-card-default uk-card uk-card-body uk-box-shadow-hover-xlarge uk-position-center"
     style="width: 550px; border-radius: 1rem">

    {#    <h3 class="uk-text-center uk-card-title">Dzienniczek Zdrowia</h3>#}

    <img class="uk-align-center uk-margin-remove-adjacent uk-border-rounded" src="{% static 'background.JPG' %}"
         width="300" height="140">
    <form id="myForm" method="POST" class="form-signin">
        {% csrf_token %}
        <h2 class="uk-text-center uk-card-title">Rejestracja</h2>

        <legend class="uk-legend " style="margin-top: 40px">Dane podstawowe</legend>

        <div class="uk-inline uk-width-1-1" style="margin-top: 20px">
            <span class="uk-form-icon" uk-icon="icon: user"></span>
            <input id="id_username" name="username" type="text" placeholder="Użytkownik" autocomplete="username"
                   class="uk-input uk-border-rounded " maxlength="15" required="" autofocus="">
        </div>

        <div class="uk-inline uk-width-1-1" style="margin-top: 20px">
            <span class="uk-form-icon" uk-icon="icon: mail"></span>
            <input id="id_email" name="email" type="email" placeholder="Adres e‑mail" autocomplete="email"
                   class="uk-input uk-border-rounded" maxlength="15" required="">
        </div>

        <div class="uk-grid" style="margin-top: 20px">
            <div class="uk-inline uk-width-1-2">
                <div class="uk-inline uk-width-1-1 ">
                    <span class="uk-form-icon" uk-icon="icon: file-text"></span>
                    <input id="id_first_name" name="first_name" type="text" placeholder="Imię" autocomplete="first_name"
                           class="uk-input uk-border-rounded" maxlength="15" required="" autofocus="">
                </div>
            </div>
            <div class="uk-inline uk-width-1-2">
                <div class="uk-inline uk-width-1-1">
                    <span class="uk-form-icon" uk-icon="icon: file-text"></span>
                    <input id="id_last_name" name="last_name" type="text" placeholder="Nazwisko" autocomplete="last_name"
                           class="uk-input uk-border-rounded" maxlength="15" required="" autofocus="">
                </div>
            </div>
        </div>

         <div class="uk-grid" style="margin-top: 20px">
            <div class="uk-inline uk-width-1-2">
                <div class="uk-inline uk-width-1-1" >
                    <span class="uk-form-icon" uk-icon="icon: lock"></span>
                    <input id="id_password1" name="password1" type="password" placeholder="Hasło" autocomplete="current-password"
                           class="uk-input uk-border-rounded" maxlength="15" required="">
                </div>
            </div>
            <div class="uk-inline uk-width-1-2">
                <div class="uk-inline uk-width-1-1" >
                    <span class="uk-form-icon" uk-icon="icon: lock"></span>
                    <input id="id_password2" name="password2" type="password" placeholder="Powtórz hasło" autocomplete="current-password"
                           class="uk-input uk-border-rounded" maxlength="15" required="">
                </div>
            </div>
         </div>

        <div style="margin-top: 10px">
            <input id="show_pass_ch" name="show_pass" type="checkbox" onclick="show_fuction()" />
            <label for="show_pass" class="inline"> Pokaż hasło</label>
        </div>

        <legend class="uk-legend" style="margin-top: 40px">Szczegóły</legend>

        <div class="uk-form-label" style="margin-top: 20px">
        <label>Data urodzenia<span uk-icon="icon: question; ratio: 0.6" uk-tooltip="od bieżącej do 100 lat wstecz" style="margin-left: 10px"></span></label></div>
        <div class="uk-inline uk-width-1-1" >
            <span class="uk-form-icon" uk-icon="icon: calendar"></span>
            <input id="id_birthday" name="birthday" type="date" autocomplete="birthday"
                   class="uk-input uk-border-rounded" min="{{time_min}}" value="{{ time_value }}" max="{{time_max}}" required="">
        </div>

        <div class="uk-form-label" style="margin-top: 20px">Płeć</div>
        <div class=" uk-grid-small uk-child-width-auto uk-grid">
            <label><input class="uk-radio" type="radio" name="gender" value="Kobieta"> Kobieta</label>
            <label><input class="uk-radio" type="radio" name="gender" value="Mężczyzna"> Mężczyzna</label>
        </div>

        <div style="margin-top: 30px">
            <input id="acceptance" name="acceptance" type="checkbox" value="accept" checked/>
            <label for="acceptance" class="inline">Zgadzam się z <a href="#modal-center" uk-toggle> Regulaminem </a></label>

            <div id="modal-center" class="uk-flex-top" uk-modal>
            <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical">
{#            <button class="uk-modal-close-default" type="button" uk-close></button>#}
            <h3> Regulamin:</h3>
            <p> Konto będzie przechowywać tylko podane dane.</p>
            <p> Konto nie zastępuje porady Lekarskiej !</p>
            <p> Aplikacja nie udostęnia dalej danych.</p>
            <p> Aplikacja jest tylko prywatnym notatnikem.</p>
            </div>
    </div>

        </div>

        {% if register_user_form.errors or register_profile_form.errors %}
            <div class="uk-text-center" style="margin-top: 20px">
                <p style="font-size: 15px; color: #ff1c19;">Sprawdź poprawność wprowadzonych danych!</p>
            </div>
        {% endif %}

        {{ register_user_form.errors }}
        {{ register_profile_form.errors }}

        <button class="uk-button uk-button-secondary uk-width-1-1 uk-border-rounded" style="margin-top: 20px"
                type="Submit">Zarejestruj</button>
    </form>

    <a href="login/">
        <button class="uk-button uk-button-default uk-button-primary uk-width-1-1 uk-border-rounded" style="margin-top: 10px">Wyjdź
        </button>
    </a>
</div>

<script>
    document.getElementById('myForm').addEventListener('submit', function(event) {
        let checkbox = document.getElementById('acceptance');
        if (!checkbox.checked) {
            alert('Musisz zaakceptować regulamin, aby kontynuować.');
            event.preventDefault(); // Zatrzymaj wysyłanie formularza
        }});

    function show_fuction() {
      let password1 = document.getElementById("id_password1");
      let password2 = document.getElementById("id_password2");

      if (password1.type === "password") {
        password1.type = "text";
        password2.type = "text";
      } else {
        password1.type = "password";
        password2.type = "password";
      }
    }
</script>

</body>
</html>