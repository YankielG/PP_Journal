{% extends 'fragments/layout.html' %}
{% load static %}

{% block page_title %} Info {% endblock %}

{% block page_content %}

    <div class="container">
        <div class="uk-grid">
            <div class="uk-width-4-5">
                <h2 >
                    <span>Witaj użytkowniku, widzieliśmy się </span>
                    {% if date_last_visits == 0 %}
                        <span> nie dawno. </span>
                    {% elif date_last_visits == 1 %}
                        <span> {{ date_last_visits }} dzień temu. </span>
                    {% else %}
                        <span> {{ date_last_visits }} dni temu. </span>
                    {% endif %}
                </h2>
            </div>
            <div class="uk-width-1-5 uk-flex uk-flex-right">
                <span>Aktywność: {{ cnt_activity }}</span>
            </div>
        </div>
        <div class="uk-heading-divider" ></div>

        <div class="uk-panel" style="margin-top: 10px;">
            <img class="uk-align-left uk-margin-remove-adjacent" src="{% static 'background.JPG' %}" width="300"
                 height="140" alt="info">
            <p>Przejmij kontrolę nad organizmem i zacznij decydować o swoim zdrowiu!</p>

            <p>Dobre zdrowie to nie tylko geny. Decydują o nim także styl życia, umiejętność rozładowywania stresu,
                sposób
                odżywiania, a nawet relacje z innymi.
                To doskonała wiadomość: stan naszego organizmu zależy w dużej mierze od nas samych.
                "Twój dziennik zdrowia" to potężna dawka motywacji, by już dziś zwrócić uwagę na swoje samopoczucie.
            </p>

            <p> Głównym zadaniem programu jest pomoc w utrzymaniu lub poprawieniu stanu Twojego zdrowia, poprzez
                monitorowanie pewnego zakresu parametrów zdrowotnych (profilaktyka CHUK).
                Korzystanie z programu na co dzień, pozwoli Ci zapanować nad realizacją najczęstszych zaleceń lekarskich
                oraz
                na pełniejsze wykorzystanie wizyty u lekarza.
            </p>
            <p>Aplikacja umożliwia rejestrowanie następujących parametrów; Temperatury, wzrostu, wagi, ciśnienia, tętna
                zażywanych leków, oraz wyrabiać określonych nawyków.
                Kolejnej odsłonie tej aplikacji powstanie rejestracja; lipidów, glukozy, wypalonych papierosów notatki,
                kalorie.
                Jeżeli cierpisz na chorobę serca, układu sercowo-naczyniowego lub cukrzycę ta aplikacja pomoże ci
                walczyć z
                twoją chorobą. Osiemdziesiąt procent Polaków nie wie, jakie ma ciśnienie tętnicze krwi. Pozostali
                uważają, że
                wiedzą, ale niemal 70 proc. z nich popełnia kardynalne błędy podczas pomiaru. Dzięki wpisą i wykresowi
                szybko je wyłapiesz.
                Wysokie ryzyko wcale nie oznacza, że zachorujesz. Znaczy tylko tyle, że powinieneś bardziej się
                pilnować.
            </p>
        </div>

        <h2>KORZYSTANIE Z PROGRAMU NIE ZASTĘPUJE PORADY LEKARSKIEJ.</h2>

        <div style="margin-outside: 40px"><h2 class="uk-heading-divider"></h2></div>
        <div>

            <div class="uk-child-width-1-2@m" uk-grid>
                <div>
                    <div>
                        <div class="uk-card-body" style="background-color: #A9A9A9; border-radius: 1rem">
                            <h3 class="uk-card-title">Ostatnie Wpisy</h3>
                            <span> <b>Wzrost: </b> </span>
                            <span>{{ last_growth.growth }}</span><br>
                            <span> <b>Waga: </b> </span>
                            <span>{{ last_weight.weight }}</span><br>
                            <span> <b>Cisnienie Skurczowe: </b> </span>
                            <span>{{ last_pressure.shrink }}</span><br>
                            <span> <b>Cisnienie Rozkurczowe: </b> </span>
                            <span>{{ last_pressure.diastole }}</span><br>
                            <span> <b>Tętno: </b> </span>
                            <span>{{ last_pressure.pulse }}</span><br>
                        </div>

                        <div class="uk-padding-small"></div>

                        <div class="uk-card-body" style="background-color: #D3D3D3; border-radius: 1rem">
                            <h3 class="uk-card-title">Konto</h3>
                            <span> <b>Utworzenie Konta: </b> </span>
                            <span>{{ user.date_joined }}</span><br>
                            <span> <b>Ostatnia Aktualizacja: </b> </span>
                            <span>{{ user.userprofile.update_date }}</span><br>
                            <span> <b>Ostatnia Wizyta: </b> </span>
                            <span>{{ user.last_login }}</span><br>
                        </div>
                    </div>
                </div>

                <div>
                    <div>
                        <div class="uk-card-body" style="background-color: #D3D3D3; border-radius: 1rem">
                            <h3 class="uk-card-title">Statystyki</h3>
                            <span> <b>Ilość Odwiedzin: </b> </span>
                            <span>{{ cnt_visits.login_count }}</span><br>
                            <span> <b>Ilość Wpisów: </b> </span>
                            <span>{{ total_entries }}</span><br>
                            <span> <b>Jesteś z nami dni: </b> </span>
                            <span>{{ date_account }}</span><br>
                        </div>

                        <div class="uk-padding-small"></div>

                        <div class="uk-card-body" style="background-color: #A9A9A9; border-radius: 1rem">
                            <h3 class="uk-card-title">Użytkownik</h3>
                            <span> <b>Imie: </b> </span>
                            <span>{{ user.first_name }}</span><br>
                            <span> <b>Nazwisko: </b> </span>
                            <span>{{ user.last_name }}</span><br>
                            <span> <b>Email: </b> </span>
                            <span>{{ user.email }}</span><br>
                            <span> <b>Wiek: </b> </span>
                            <span>{{ age }}</span><br>
                            <span> <b>Płeć: </b> </span>
                            <span>{{ user.userprofile.gender }}</span><br>
                    </div>
                </div>
            </div>


        </div>

        <div class="uk-padding-small"></div>

        <div style="background-color: #F5F5F5; height: 350px; border-radius: 1rem">

            <div class="uk-grid">
                <div class="uk-width-1-2">
                    <h3 class="uk-heading-medium" style="margin-left: 50px; margin-top: 40px;">Twoje
                        BMI: {{ bmi_value |floatformat:1 }}</h3>
                    <h2 style="margin-left: 350px; margin-top: 30px; color: {{ bmi_color }}">{{ bmi_rate }}</h2>
                    <h4 style="margin-left: 50px; margin-top: 40px; color:dodgerblue ">{{ bmi_comment }}</h4>
                    <h5 style="margin-left: 50px; margin-top: 30px; color:gray ">BMI - Body Mass Index</h5>
                </div>

                <div class="uk-width-1-2">
                    <div class="uk-position-center uk-position-relative"
                         style="margin-top: 15px; height: 250px; width: 250px">
                        <canvas id="line-chart"></canvas>
                    </div>
                </div>

                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                <script>

                    var label_list = [];
                    {% for value in chart_x %}
                        label_list.push("{{ value }}");
                    {% endfor %}

                    new Chart(document.getElementById("line-chart"), {
                        type: 'doughnut',
                        data: {
                            labels: [],
                            datasets: [{
                                data: {{chart}},
                                label: "",
                                borderColor: "#3e95cd",
                                backgroundColor: [
                                    '{{bmi_color}}',
                                    '#FFFFE0',
                                ],
                                hoverOffset: 4,
                                fill: false,
                            }]
                        },
                        options: {
                            plugins: {
                                legend: {display: false},
                                title: {
                                    text: 'Wartości w czasie',
                                    display: false
                                }
                            },
                        }
                    });
                    Chart.defaults.plugins.tooltip.enabled = false;
                </script>
            </div>
        </div>

        <div class="uk-padding-small"></div>

        <div style="background-color: #F5F5F5; height: 350px; border-radius: 1rem">

            <div class="uk-grid">
                <div class="uk-width-1-2">
                    <div class="uk-position-center uk-position-relative"
                         style="margin-top: 15px; margin-left: 15px; height: 350px; width: auto">
                        <img class="uk-align-left uk-margin-remove-adjacent" src="{% static 'metabolism.jpg' %}"
                             alt="info">
                    </div>
                </div>
                <div class="uk-width-1-2">
                    <h3 class="uk-heading-medium" style="margin-right: 50px; margin-top: 40px;">Twoje
                        PPM: {{ ppm_value |floatformat:1 }}</h3>
                    <h2 style="margin-left: 50px; margin-top: 30px; color: {{ bmi_color }}">{{ ppm_rate }}</h2>
                    <h4 style="margin-left: 50px; margin-top: 40px; color:dodgerblue ">{{ ppm_comment }}</h4>
                    <h5 style="margin-left: 50px; margin-top: 30px; color:gray ">PPM - Podstawowa Przemiana Materii</h5>
                </div>
            </div>
        </div>

        <div style="margin-bottom: 100px"></div>

    </div>
{% endblock %}
